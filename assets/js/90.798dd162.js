(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{667:function(s,e,t){"use strict";t.r(e);var a=t(2),r=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"为什么迁移博客"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么迁移博客"}},[s._v("#")]),s._v(" 为什么迁移博客")]),s._v(" "),e("p",[s._v("最近在看 Serverless，恰逢原 WordPress 的博客需要续费，对比一下自建博客和在 Serverless 的费用。")]),s._v(" "),e("ul",[e("li",[s._v("自建博客: 腾讯云 1CPU 1G 小主机 1080元/3年, 平均 0.98 元一天")]),s._v(" "),e("li",[s._v("Serverless : COS + CDN 费用小于 0.3 元一天")])]),s._v(" "),e("p",[s._v("使用腾讯云的 Serverless 建站，主要支付的是内容存储 COS 和 内容分发 CDN 两部分的费用，\n目前 COS 和 CDN 都有 6个月的免费额度，\n过了免费期后，我这个小破站的流量，都达不到最低计费标准, 费用也会非常低.....")]),s._v(" "),e("p",[s._v("最后在金钱的吸引下，果断抛弃云主机，拥抱 Serverless")]),s._v(" "),e("h2",{attrs:{id:"新的博客框架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新的博客框架"}},[s._v("#")]),s._v(" 新的博客框架")]),s._v(" "),e("p",[s._v("新的博客将使用 "),e("a",{attrs:{href:"https://vuepress.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("VuePress"),e("OutboundLink")],1),s._v(" 来编写，VuePress 会把 Markdown 编译成静态网页。\n可以直接挂在到 github.io 上，但是为了使用自定义的域名，就要使用 Serverless 来挂载了。")]),s._v(" "),e("p",[s._v("具体教程")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://serverlesscloud.cn/best-practice/2020-02-04-vuepress-serverless",target:"_blank",rel:"noopener noreferrer"}},[s._v("基于 Serverless 的 VuePress 极简静态网站"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.serverless.com/cn/learn/case-studies/serverless-fullstack-vue-practice-pro/",target:"_blank",rel:"noopener noreferrer"}},[s._v("基于 Serverless Component 全栈解决方案 Ⅱ"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"主题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主题"}},[s._v("#")]),s._v(" 主题")]),s._v(" "),e("p",[s._v("VuePress 的默认主题是写文档的，我找了个 blog 主题  "),e("a",{attrs:{href:"https://vuepress-theme-reco.recoluan.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("vuepress-theme-reco"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"迁移"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#迁移"}},[s._v("#")]),s._v(" 迁移")]),s._v(" "),e("p",[s._v("之前的博客都存储在 Evernote 中，我写了些脚本，把 Evernote 备份的文档转换成 VuePress 支持的 Markdown。")]),s._v(" "),e("p",[s._v("用到以下工具")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/apaleslimghost/enex-parser",target:"_blank",rel:"noopener noreferrer"}},[s._v("enex-parser"),e("OutboundLink")],1),s._v(" 可以解析每篇文章的信息")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/wormi4ok/evernote2md",target:"_blank",rel:"noopener noreferrer"}},[s._v("evernote2md"),e("OutboundLink")],1),s._v(" 可以把 Evernote 转成 markdown，但是没有日期和tag信息")]),s._v(" "),e("h2",{attrs:{id:"部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),e("p",[s._v("搞定之后，借助于 serverless 这个工具，写好 yaml 描述文件后就可以部署博客了。")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# serverless.yml")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("blog")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("component")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@serverless/tencent-website"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("inputs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("code")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("src")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ./public "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Upload static files")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" index.html\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("error")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 404.html\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("region")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("guangzhou\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("bucketName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" blog\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新增的 CDN 自定义域名配置")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hosts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" www.myfjdthink.com "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 希望配置的自定义域名")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("https")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("certId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" eUsMglwe "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SSL 证书 ID")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" off\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("httpsType")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("forceSwitch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("-2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[s._v("执行部署命令")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("sls --debug\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v('就可以一键部署博客，实际上是 "@serverless/tencent-website" 这个组件帮你执行了一系列的事情：')]),s._v(" "),e("ul",[e("li",[s._v("上传静态文件到 COS")]),s._v(" "),e("li",[s._v("配置 CDN")]),s._v(" "),e("li",[s._v("配置域名服务")])]),s._v(" "),e("p",[s._v("不过 https 证书还是要手动配置的，上面提供的文章里有说。")]),s._v(" "),e("p",[s._v("部署完成后，再配置一下云解析，把 www.myfjdthink.com 解析到指定的位置即可。")])])}),[],!1,null,null,null);e.default=r.exports}}]);