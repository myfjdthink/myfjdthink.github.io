(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{568:function(t,a,e){t.exports=e.p+"assets/img/a4e93bb8e9b4aec30130c147494b1a98.a4e93bb8.png"},569:function(t,a,e){t.exports=e.p+"assets/img/cc878f9e0676e17bc250ebb042206b26.cc878f9e.png"},570:function(t,a,e){t.exports=e.p+"assets/img/35f370ac9dc556b16e87b1deda661bce.35f370ac.png"},571:function(t,a,e){t.exports=e.p+"assets/img/1c67da1351016457ddb9670db0445458.1c67da13.png"},572:function(t,a,e){t.exports=e.p+"assets/img/a62154a6cf5698899aee1772076c8ae9.a62154a6.png"},573:function(t,a,e){t.exports=e.p+"assets/img/61d0ba0da9953ce9560ec720b9a3bc2a.61d0ba0d.png"},574:function(t,a,e){t.exports=e.p+"assets/img/f09c44482c5b84c1f0217cbbe65505a4.f09c4448.png"},575:function(t,a,e){t.exports=e.p+"assets/img/1dacdfbfc1992a68b5285573ba8e9647.1dacdfbf.png"},576:function(t,a,e){t.exports=e.p+"assets/img/b5623bb464b26885350b8d95f88db519.b5623bb4.png"},577:function(t,a,e){t.exports=e.p+"assets/img/8a3bfc74812b048f7fe1579509962d0d.8a3bfc74.png"},578:function(t,a,e){t.exports=e.p+"assets/img/85d1e74dc6a1383597b71fa812bfcb26.85d1e74d.png"},579:function(t,a,e){t.exports=e.p+"assets/img/632be1e3df2e9617e9a532dd9bc8b7c9.632be1e3.png"},580:function(t,a,e){t.exports=e.p+"assets/img/641ebb3a9588a310e6e5fbcb0cd2aadc.641ebb3a.png"},581:function(t,a,e){t.exports=e.p+"assets/img/82f541e8ba076d42d712e4dbf1b63f6a.82f541e8.png"},582:function(t,a,e){t.exports=e.p+"assets/img/84a26133100314e2513fe0a89ed53dce.84a26133.png"},583:function(t,a,e){t.exports=e.p+"assets/img/b03fa0efcdc42c73357d4132f679a03c.b03fa0ef.png"},584:function(t,a,e){t.exports=e.p+"assets/img/f6e84971e9a95f1ad3504f8e821669c2.f6e84971.png"},674:function(t,a,e){"use strict";e.r(a);var s=e(2),c=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"inspect-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inspect-code"}},[t._v("#")]),t._v(" Inspect Code")]),t._v(" "),a("p",[t._v("想让代码更简洁好看？WebStorm 可以帮助你。")]),t._v(" "),a("p",[t._v("Kalengo 的 CodeStyle 是 Standard 的，和 WebStorm 的默认配置不一样，在执行代码检查之前，我们要先把 CodeStyle 调整到和项目一致。")]),t._v(" "),a("p",[t._v("打开 WebStorm 配置，找到 TypeScript 的 CodeStyle，选择 Standard 即可。")]),t._v(" "),a("p",[a("img",{attrs:{src:e(568),alt:"a4e93bb8e9b4aec30130c147494b1a98.png"}})]),t._v(" "),a("p",[t._v("接下来，我们对 src 目录执行代码检查，右键点击 src 目录，选择 Inspect Code")]),t._v(" "),a("p",[a("img",{attrs:{src:e(569),alt:"cc878f9e0676e17bc250ebb042206b26.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:e(570),alt:"35f370ac9dc556b16e87b1deda661bce.png"}})]),t._v(" "),a("p",[t._v("然后就得到结果了")]),t._v(" "),a("p",[a("img",{attrs:{src:e(571),alt:"1c67da1351016457ddb9670db0445458.png"}})]),t._v(" "),a("p",[t._v("一共有几个分类，我们一个一个讲")]),t._v(" "),a("h2",{attrs:{id:"重复代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重复代码"}},[t._v("#")]),t._v(" 重复代码")]),t._v(" "),a("p",[a("img",{attrs:{src:e(572),alt:"a62154a6cf5698899aee1772076c8ae9.png"}})]),t._v(" "),a("p",[t._v("双击列表里的文件，可以自动跳到文件位置")]),t._v(" "),a("p",[a("img",{attrs:{src:e(573),alt:"61d0ba0da9953ce9560ec720b9a3bc2a.png"}})]),t._v(" "),a("p",[t._v("可以看到，重复代码位置那里的背景是淡黄色的，表示 warning。")]),t._v(" "),a("p",[t._v("鼠标移动到此处，会弹出一个选项")]),t._v(" "),a("p",[a("img",{attrs:{src:e(574),alt:"f09c44482c5b84c1f0217cbbe65505a4.png"}})]),t._v(" "),a("p",[t._v("点击 show all")]),t._v(" "),a("p",[a("img",{attrs:{src:e(575),alt:"1dacdfbfc1992a68b5285573ba8e9647.png"}})]),t._v(" "),a("p",[t._v("重复代码被高亮显示，左下角也展示有所用重复的地方，看来这段代码已经重复了三次了。")]),t._v(" "),a("p",[a("strong",[t._v("解决方案")])]),t._v(" "),a("ol",[a("li",[t._v("Controller 里的重复代码，一般是 Joi 的校验重复了\n"),a("img",{attrs:{src:e(576),alt:"b5623bb464b26885350b8d95f88db519.png"}})])]),t._v(" "),a("p",[t._v("这种问题建议引入 akajs, akajs 提倡使用 DTO 对象，并且提供了 @DTO 注解帮助完成参数校验，而 DTO 是非常方便实现共享的。")]),t._v(" "),a("ol",[a("li",[t._v("Service 里的重复代码")])]),t._v(" "),a("p",[t._v("看下图，WebStorm 还是比较聪明的，不是单纯地 match string，还是会把注释代码过滤掉的。\n"),a("img",{attrs:{src:e(577),alt:"8a3bfc74812b048f7fe1579509962d0d.png"}})]),t._v(" "),a("p",[t._v("这类问题，要根据实际情况解决，首先就是要搞清楚不同 Service 之前的关系，组合还是继承，然后把重复的 function 通过继承或者调用来实现共享。")]),t._v(" "),a("ol",[a("li",[t._v("test 里的重复代码\n"),a("img",{attrs:{src:e(578),alt:"85d1e74dc6a1383597b71fa812bfcb26.png"}})])]),t._v(" "),a("p",[t._v("这类问题，一般是断言的逻辑重复了，要根据实际情况决定要不要把断言的逻辑抽成一个 function")]),t._v(" "),a("h2",{attrs:{id:"多余的代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多余的代码"}},[t._v("#")]),t._v(" 多余的代码")]),t._v(" "),a("p",[t._v("这类问题，一般是 WebStorm 告诉我们，代码可以更简洁，看下面的问题列表，关键字有两个 Redundant 和 Unused，多余和无用的意思。")]),t._v(" "),a("p",[a("img",{attrs:{src:e(579),alt:"632be1e3df2e9617e9a532dd9bc8b7c9.png"}})]),t._v(" "),a("p",[t._v("这类问题请根据事情情况一一处理，WebStorm 如果判断它可以自动完成修复工作的话，会在视图上方直接提供修复选项，点击修复即可。")]),t._v(" "),a("p",[a("img",{attrs:{src:e(580),alt:"641ebb3a9588a310e6e5fbcb0cd2aadc.png"}})]),t._v(" "),a("h2",{attrs:{id:"拼写问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拼写问题"}},[t._v("#")]),t._v(" 拼写问题")]),t._v(" "),a("p",[t._v("拼写错误的单词都会被找出来")]),t._v(" "),a("p",[a("img",{attrs:{src:e(581),alt:"82f541e8ba076d42d712e4dbf1b63f6a.png"}})]),t._v(" "),a("p",[t._v("编码过程中，有留心的话，编辑器里已经是有提示的了，变量下方会有个波浪线")]),t._v(" "),a("p",[a("img",{attrs:{src:e(582),alt:"84a26133100314e2513fe0a89ed53dce.png"}})]),t._v(" "),a("p",[t._v("解决这类问题，也比较简单，如果是真的拼写错误，请酌情修改。")]),t._v(" "),a("ul",[a("li",[t._v("如果只是一个 function 内的变量，直接使用 WebStorm 的重构 rename 功能即可。")]),t._v(" "),a("li",[t._v("如果是全局变量或者 model 字段，那就无法修改了，或者有些名词是我们创作出来的，这种情况下，我们可以选择把这个名词添加到 WebStorm 的“字典”中。\n"),a("img",{attrs:{src:e(583),alt:"b03fa0efcdc42c73357d4132f679a03c.png"}})])]),t._v(" "),a("p",[t._v("可以选择全局字典或者项目字典，添加后就不会报错了。")]),t._v(" "),a("p",[t._v("有个小问题，这个字典是保存在 .idea/dictionaries/yourname.xml 中的，没有上传到 git 中，可以考虑把这个文件添加到 git 中")]),t._v(" "),a("h2",{attrs:{id:"typescript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#typescript"}},[t._v("#")]),t._v(" TypeScript")]),t._v(" "),a("p",[t._v("这类问题，一般是风格问题，酌情修改即可，有个小技巧，可以把 npm lint --fix 作为 npm test 的前置条件，就不会漏了 tslint 的问题了")]),t._v(" "),a("p",[a("img",{attrs:{src:e(584),alt:"f6e84971e9a95f1ad3504f8e821669c2.png"}})])])}),[],!1,null,null,null);a.default=c.exports}}]);