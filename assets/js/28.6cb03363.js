(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{464:function(e,a,r){e.exports=r.p+"assets/img/-1505818063239.df9b3ae8.png"},465:function(e,a,r){e.exports=r.p+"assets/img/-1505820236121.4c847f0f.png"},466:function(e,a,r){e.exports=r.p+"assets/img/-1505820586365.a25b6ae2.png"},625:function(e,a,r){"use strict";r.r(a);var t=r(2),s=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"swagger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swagger"}},[e._v("#")]),e._v(" Swagger")]),e._v(" "),a("h2",{attrs:{id:"什么是-swagger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-swagger"}},[e._v("#")]),e._v(" 什么是 Swagger")]),e._v(" "),a("p",[e._v("官网的解释：")]),e._v(" "),a("blockquote",[a("p",[e._v("Swagger is the world’s largest framework of API developer tools for")]),e._v(" "),a("p",[e._v("the OpenAPI Specification(OAS), enabling development across the entire")]),e._v(" "),a("p",[e._v("API lifecycle, from design and documentation, to test and deployment.")])]),e._v(" "),a("p",[e._v("Swagger 提供了对 API 的设计、文档、测试、部署等阶段的支持。")]),e._v(" "),a("p",[e._v("Web 开发的本质是 API 开发，Swagger 使用 swagger.json/yaml 文件来定义 API，语法基于 "),a("a",{attrs:{href:"https://github.com/OAI/OpenAPI-Specification",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenAPI Specification(OAS) 规范。"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("OpenAPI 语法入门："),a("a",{attrs:{href:"https://www.gitbook.com/book/huangwenchao/swagger/details",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.gitbook.com/book/huangwenchao/swagger/details"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("一个在线的 demo： "),a("a",{attrs:{href:"https://editor.swagger.io//?_ga=2.267808907.403623983.1505817850-1482371638.1504594291#/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://editor.swagger.io//?_ga=2.267808907.403623983.1505817850-1482371638.1504594291#/"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:r(464),alt:"-1505818063239.png"}})]),e._v(" "),a("h2",{attrs:{id:"swagger-可以做什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swagger-可以做什么"}},[e._v("#")]),e._v(" Swagger 可以做什么")]),e._v(" "),a("p",[e._v("围绕这个 API 定义，Swagger 生态提供了以下主要的服务：")]),e._v(" "),a("ol",[a("li",[e._v("API 编辑：Swagger Editor")]),e._v(" "),a("li",[e._v("API 文档：Swagger UI")]),e._v(" "),a("li",[e._v("Mock 服务：Easy Mock")]),e._v(" "),a("li",[e._v("代码生成器：Swagger Codegen\n"),a("a",{attrs:{href:"https://app.swaggerhub.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Swagger Hub"),a("OutboundLink")],1),e._v(" 全家桶对上述功能提供了整套服务打包。")])]),e._v(" "),a("p",[e._v("理论上是可用，但是 mock 和 codegen 服务不够灵活。")]),e._v(" "),a("p",[e._v("接下来重点介绍 Mock 和 代码生成器这两个部分的内容。")]),e._v(" "),a("h2",{attrs:{id:"mock-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mock-服务"}},[e._v("#")]),e._v(" Mock 服务")]),e._v(" "),a("h3",{attrs:{id:"swagger-hub-的-auto-mock"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swagger-hub-的-auto-mock"}},[e._v("#")]),e._v(" Swagger Hub 的 Auto Mock")]),e._v(" "),a("p",[e._v("Swagger Hub 提供的 "),a("a",{attrs:{href:"https://swaggerhub.com/blog/swaggerhub-feature/the-smartbear-virtserver-integration/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mock 服务"),a("OutboundLink")],1),e._v("， 只能区分 String 和 Number，不能提供更灵活的 Mock。")]),e._v(" "),a("h3",{attrs:{id:"easy-mock"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#easy-mock"}},[e._v("#")]),e._v(" Easy Mock")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.easy-mock.com/docs",target:"_blank",rel:"noopener noreferrer"}},[e._v("Easy Mock"),a("OutboundLink")],1),e._v(" 是一个可视化，并且能快速生成 模拟数据 的持久化服务，支持生成随机的文本、数字、布尔值、日期、邮箱、链接、图片、颜色等，支持扩展更多数据类型，支持自定义函数和正则。")]),e._v(" "),a("p",[e._v("重点是它可以导入 Swagger 配置，")]),e._v(" "),a("h2",{attrs:{id:"codegen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#codegen"}},[e._v("#")]),e._v(" Codegen")]),e._v(" "),a("h3",{attrs:{id:"swagger-hub-的-codegen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swagger-hub-的-codegen"}},[e._v("#")]),e._v(" Swagger Hub 的 Codegen")]),e._v(" "),a("p",[e._v("官方宣称提供几十个 server 端和 client 端的代码生成服务，但是实际上用处非常有限，以 nodejs-server 为例，这个模板使用 connect 框架，使用 express 和 koa 框架的就不适用了，而且编码风格差距也非常大。")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("官方支持的 Codegen 模板：\n"),a("img",{attrs:{src:r(465),alt:"-1505820236121.png"}})])]),e._v(" "),a("li",[a("p",[e._v("nodejs-server 模板生成的代码：\n"),a("img",{attrs:{src:r(466),alt:"-1505820586365.png"}})])])]),e._v(" "),a("h3",{attrs:{id:"自定义模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义模板"}},[e._v("#")]),e._v(" 自定义模板")]),e._v(" "),a("p",[e._v("在代码生成器这一块，往往是半自动的工具更加灵活，自定义模板，根据 swagger.json 生成填充值，一键生成重复内容。")]),e._v(" "),a("p",[e._v("在 Node 这一块，半自动生成器做得比较好的是 "),a("a",{attrs:{href:"https://www.npmjs.com/package/swagger-js-codegen",target:"_blank",rel:"noopener noreferrer"}},[e._v("swagger-js-codegen"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("这个工具使用 "),a("a",{attrs:{href:"https://mustache.github.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mustache"),a("OutboundLink")],1),e._v(" 模板工具，还提供了 gulp 工具。")]),e._v(" "),a("p",[e._v("根据这个思路我们可以自定义好模板，然后一键生成代码。")]),e._v(" "),a("h3",{attrs:{id:"npm-上的-swagger-工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-上的-swagger-工具"}},[e._v("#")]),e._v(" npm 上的 Swagger 工具")]),e._v(" "),a("ol",[a("li",[e._v("根据 Swagger 生成 Joi "),a("a",{attrs:{href:"https://github.com/zaaack/koa-joi-swagger",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/zaaack/koa-joi-swagger"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("根据 Swagger 生成 Mongoose "),a("a",{attrs:{href:"https://www.npmjs.com/package/swagger-mongoose",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.npmjs.com/package/swagger-mongoose"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"番外"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#番外"}},[e._v("#")]),e._v(" 番外")]),e._v(" "),a("h3",{attrs:{id:"apidoc-to-swagge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apidoc-to-swagge"}},[e._v("#")]),e._v(" apidoc to swagge")]),e._v(" "),a("p",[e._v("使用 apidoc-swagger 把现在的 apidock 转为 swagger")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/apidoc-swagger",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.npmjs.com/package/apidoc-swagger"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),a("p",[a("a",{attrs:{href:"http://blog.just4fun.site/swagger-note.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://blog.just4fun.site/swagger-note.html"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=s.exports}}]);